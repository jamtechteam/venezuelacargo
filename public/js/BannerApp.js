"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3623],{5547:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(7757),r=n.n(a);function o(e,t,n,a,r,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function i(e){o(s,a,r,i,c,"next",e)}function c(e){o(s,a,r,i,c,"throw",e)}i(void 0)}))}}var i=function(){return n.e(4932).then(n.bind(n,4932))},c=function(){return n.e(8845).then(n.bind(n,555))},d=function(){return n.e(5642).then(n.bind(n,5642))};const l={name:"BannerApp",data:function(){return{fileImage:"",componentRender:i,componentRenderOne:"",activeComponent:"",activeComponentSecond:"",cardBodyComponent:"",deleteData:{url:"",id:""},alert:{},alertSecound:{},images:[],id_imagen:""}},beforeCreate:function(){this.$nextTick(s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getImagenes();case 2:case"end":return e.stop()}}),e,this)}))))},methods:{changeFileImage:function(e){var t=e.target.files[0];this.fileImage="","image/jpeg"==t.type||"image/png"==t.type||"image/jpg"==t.type?this.fileImage=t:(e.target.value="",alert('Por Favor, debe de agregar una imagen. Con una de estas extensiones "/jpg/jpeg/png"'))},sendImage:function(){var e=this;return s(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.alert={},e.alertSecound="",e.activeComponentSecond="",e.activeComponent="",""!==e.fileImage){t.next=9;break}return e.alert.msg="Error,debe agregar una imagen.",e.alert.clss="error",e.activeComponent=c,t.abrupt("return");case 9:return(n=new FormData).append("image",e.fileImage),e.componentRenderOne=i,e.componentRender=i,t.next=15,e.axios.post("banner-app",n,{headers:{"content-type":"multipart/form-data"}}).then(function(){var t=s(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.alert={msg:n.data.message,clss:"updated"},setTimeout((function(){e.activeComponent=c,e.componentRenderOne=""}),1500),t.next=4,e.getImagenes();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.alert={msg:500!==t.response.status?t.response.data.message:"Ha ocurrido un error con el servidor por favor intentar mas tarde",clss:"error"},setTimeout((function(){e.activeComponent=c,e.componentRenderOne=""}),1500)}));case 15:case"end":return t.stop()}}),t)})))()},getImagenes:function(){var e=arguments,t=this;return s(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]&&e[0],n.next=3,t.axios.get("banner-app").then((function(e){if(console.log(e.data,"response.data"),null!=e.data.results&&0!=e.data.results.length){t.images=e.data.results;for(var n=0;n<t.images.length;n++)if("visible"===t.images[n].estado){t.id_imagen=t.images[n].id_banner;break}}else t.images=[],t.alertSecound={msg:"No hay imagenes",clss:"error"},setTimeout((function(){t.activeComponentSecond=c}),2500);setTimeout((function(){t.componentRender="",a&&(t.activeComponentSecond=c)}),2e3)})).catch((function(e){t.alertSecound={msg:500!==e.response.status?e.response.data.message:"Ha ocurrido un error con el servidor por favor intentar mas tarde",clss:"error"},console.log(e.response.data),t.activeComponentSecond=c,setTimeout((function(){t.componentRender=""}),2e3)}));case 3:case"end":return n.stop()}}),n)})))()},onChangeImagen:function(e){var t=this;return s(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.alert={},t.alertSecound="",t.activeComponentSecond="",a=e.target.value,t.id_imagen=a,t.activeComponent="",""!==t.id_imagen){n.next=11;break}return t.alertSecound.msg="Error, debe seleccionar una image.",t.alertSecound.clss="error",t.activeComponentSecond=c,n.abrupt("return");case 11:return t.componentRender=i,n.next=14,t.axios.put("banner-app/".concat(t.id_imagen)).then((function(e){t.alertSecound={msg:e.data.message,clss:"updated"},setTimeout(s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getImagenes(!0);case 2:case"end":return e.stop()}}),e)}))),1500)})).catch((function(e){t.alertSecound={msg:500!==e.response.status?e.response.data.message:"Ha ocurrido un error con el servidor por favor intentar mas tarde",clss:"error"},t.activeComponentSecond=c,t.componentRender=""}));case 14:case"end":return n.stop()}}),n)})))()},deleteImagen:function(e){this.alert={},this.alertSecound="",this.activeComponentSecond="",this.activeComponent="";var t=e.target.value;console.log("vau id",t),this.deleteData={url:"banner-app",id:t},this.cardBodyComponent=d},getMessageDelete:function(e){var t=this;this.alertSecound={msg:e.message,clss:200==e.status?"updated":"error"},this.cardBodyComponent="",200==e.status?(this.componentRender=i,setTimeout(s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getImagenes(!0);case 2:case"end":return e.stop()}}),e)}))),1e3)):this.activeComponentSecond=c,this.deleteData={url:"",id:""}},getResetId:function(){}}};const u=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-xl"},[n("div",{staticClass:"row row-cards"},[n("div",{staticClass:"col-12"},[n("form",{staticClass:"card card-lg",attrs:{name:"bannerapp",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.sendImage(t)}}},[n("div",{staticClass:"card-body"},[n(e.componentRenderOne,{tag:"component"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:""===e.componentRenderOne,expression:"componentRenderOne === ''"}],staticStyle:{"justify-content":"center","flex-direction":"column",display:"flex",margin:"0 auto","max-width":"380px"}},[""!=e.activeComponent?n("div",{staticClass:"w-100 mb-3"},[n(e.activeComponent,{tag:"component",attrs:{alert:e.alert}})],1):e._e(),e._v(" "),n("div",{staticClass:"mb-3"},[n("div",{staticClass:"form-label"},[e._v("Selecciona una imagen")]),e._v(" "),n("input",{staticClass:"form-control",attrs:{type:"file",id:"fileimage"},on:{change:function(t){return e.changeFileImage(t)}}})]),e._v(" "),n("button",{staticClass:"btn btn-info m-auto mt-3",attrs:{type:"submit"}},[e._v("\r\n                            Guardar\r\n                        ")])])],1)])]),e._v(" "),n("div",{staticClass:"col-12"},[n("div",{staticClass:"card card-lg"},[n("div",{staticClass:"card-body"},[""!=e.activeComponentSecond?n("div",{staticClass:"w-100 mb-3"},[n(e.activeComponentSecond,{tag:"component",attrs:{alert:e.alertSecound}})],1):e._e(),e._v(" "),n(e.componentRender,{tag:"component"}),e._v(" "),""===e.componentRender?n("div",{staticClass:"row row-cards mb-3"},e._l(e.images,(function(t,a){return n("div",{key:a,staticClass:"col-12 col-sm-6 col-md-4 col-lg-4 mb-3"},[n("div",{staticClass:"card card-sm"},[n("a",{directives:[{name:"title",rawName:"v-title"}],staticClass:"d-block",staticStyle:{height:"220px"},attrs:{href:t.ruta_image,target:"_blank",rel:"noopener noreferrer",title:"Ver Imagen"}},[n("img",{staticClass:"card-img-top",staticStyle:{height:"100%",width:"100%","object-fit":"cover"},attrs:{src:t.ruta_image}})]),e._v(" "),n("div",{staticClass:"card-body",staticStyle:{padding:"10px 8px"}},[n("div",{staticClass:"btn-list flex-nowrap"},[n("button",{directives:[{name:"title",rawName:"v-title"}],staticClass:"align-text-top me-2 nav-link mb-0 btn btn-danger",staticStyle:{padding:"5px"},attrs:{value:t.id_banner,type:"button",title:"Eliminar Imagen"},on:{click:function(t){return e.deleteImagen(t)}}},[e._v("\r\n                                            Eliminar\r\n                                        ")]),e._v(" "),n("button",{directives:[{name:"title",rawName:"v-title"}],staticClass:"align-text-top me-2 nav-link mb-0 btn",class:{"btn-light":"visible"==t.estado,"btn-outline-warning":"no-visible"==t.estado},staticStyle:{padding:"5px"},attrs:{value:t.id_banner,type:"button",title:"no-visible"===t.estado?"Cambiar a visible":"Cambiar a no visible"},on:{click:function(t){return e.onChangeImagen(t)}}},[e._v("\r\n                                            "+e._s("no-visible"===t.estado?"No visible":"Visible")+"\r\n                                        ")])])])])])})),0):e._e()],1)])]),e._v(" "),n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n("keep-alive",[n(e.cardBodyComponent,{tag:"component",attrs:{deleteData:e.deleteData},on:{getMessageDelete:e.getMessageDelete,getResetId:e.getResetId}})],1)],1)],1)])}),[],!1,null,null,null).exports}}]);