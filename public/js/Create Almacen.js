"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9519],{2639:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(3645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".input-file_s{height:100%;opacity:0;position:absolute;z-index:1}.dropdown-menu.input-result-search.show{display:none}.dropdown-menu.input-result-search.show.show-search{inset:auto!important;padding:10px 15px;transform:none!important;width:100%}.input-result-search.show.show-search,.invalid-feedback{display:block}.div-loader_white{margin:0}",""]);const s=r},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(r[i]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),t.push(c))}},t}},3379:(e,t,a)=>{var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function o(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function c(e,t){for(var a={},n=[],r=0;r<e.length;r++){var s=e[r],c=t.base?s[0]+t.base:s[0],l=a[c]||0,u="".concat(c," ").concat(l);a[c]=l+1;var d=o(u),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:u,updater:h(p,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var s=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function v(e,t,a){var n=a.css,r=a.media,s=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,f=0;function h(e,t){var a,n,r;if(t.singleton){var s=f++;a=m||(m=l(t)),n=p.bind(null,a,s,!1),r=p.bind(null,a,s,!0)}else a=l(t),n=v.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var a=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=o(a[n]);i[r].references--}for(var s=c(e,t),l=0;l<a.length;l++){var u=o(a[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}a=s}}}},4609:(e,t,a)=>{a.d(t,{Z:()=>r});const n={name:"BtnVolver",props:["classe"],methods:{volver:function(){this.$router.go(-1)}}};const r=(0,a(1900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn",class:e.classe,attrs:{type:"button"},on:{click:e.volver}},[a("i",{staticClass:"ti ti-arrow-back-up me-1"}),e._v("\n    Volver\n")])}),[],!1,null,null,null).exports},7856:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(7757),r=a.n(n),s=a(4609);function i(e,t,a,n,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,c,"next",e)}function c(e){i(s,n,r,o,c,"throw",e)}o(void 0)}))}}var c=function(){return a.e(6956).then(a.bind(a,4932))},l=function(){return a.e(8845).then(a.bind(a,555))};const u={name:"CreateAlmacen",data:function(){return{componentRender:"",activeComponent:"",trackings:[{tracking:"",descripcion:"",num_piezas:"",ancho:"",largo:"",alto:"",peso:"",ruta_image:"",image:""}],id_cliente:"",cliente:"",usuarios:[],transportes:[],id_empresa_transporte:"",warehouse:"",alert:{}}},components:{BtnVolver:s.Z},beforeCreate:function(){this.$nextTick(o(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("transportes/all").then((function(e){t.transportes=e.data.results})).catch((function(e){console.log(e.response.data)}));case 2:case"end":return e.stop()}}),e,this)}))))},methods:{addTracking:function(e){for(var t=0;t<this.trackings.length;t++)if(!this.validarFormTracking(this.trackings[t]))return;this.trackings.push({tracking:"",descripcion:"",num_piezas:"",ancho:"",largo:"",alto:"",peso:"",ruta_image:"",image:""})},validarFormTracking:function(e){var t=e.tracking,a=e.descripcion,n=e.num_piezas,r=e.ancho,s=e.largo,i=e.alto,o=e.peso,c=e.image;switch(!0){case""==t&&null!=t||""==a&&null!=a||""==n&&null!=n||""==r&&null!=r||""==s&&null!=s||""==i&&null!=i||""==o&&null!=o||""==c&&null!=c:return alert("Por favor, debe agregar datos en todos los campos."),!1;case isNaN(n)||isNaN(r)||isNaN(s)||isNaN(i)||isNaN(o):return alert("Por favor, los datos deben ser numeros, en los campos numero piezas, ancho, largo, alto y peso."),!1;case n%1!=0:return alert("Por favor, los datos deben ser numeros enteros, en el campo numero piezas."),!1;default:return!0}},deleteTracking:function(e){for(var t=[],a=0;a<this.trackings.length;a++)a!=e.target.parentElement.value&&t.push(this.trackings[a]);this.trackings=t},changeFileImage:function(e){var t=this,a=e.target.id,n=e.target.files[0];if("image/jpeg"==n.type||"image/png"==n.type||"image/jpg"==n.type){this.trackings[a].image=n;var r=new FileReader;r.onload=function(e){t.trackings[a].ruta_image=e.target.result},r.readAsDataURL(n)}else alert('Por Favor, debe de agregar una imagen. Con una de estas extensiones "/jpg/jpeg/png"')},inputSearch:function(e){var t=this;return o(r().mark((function a(){var n,s;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.target.offsetParent,s=t.cliente,a.next=4,t.axios.get("usuarios",{params:{search:s}}).then((function(e){t.usuarios=e.data.results,n.querySelector(".dropdown-menu").classList.add("show-search")})).catch((function(e){console.log(e.response.data)}));case 4:case"end":return a.stop()}}),a)})))()},clickRadioCheck:function(e){var t=e.target.parentNode.parentNode.parentNode,a=e.target.value,n=this.usuarios;if(0!=n.length)for(var r=0;r<n.length;r++)if(a==n[r].usuario_id){this.id_cliente=n[r].usuario_id,this.cliente="".concat(n[r].cod_usuario," - ").concat(n[r].nombres," ").concat(n[r].apellidos);break}t.classList.remove("show-search"),this.usuarios=[]},save:function(){for(var e=this,t=0;t<this.trackings.length;t++)if(!this.validarFormTracking(this.trackings[t]))return;for(var a="",n=0;n<this.trackings.length;n++){if(a==this.trackings[n].tracking)return void alert("No puede haber dos trancking con el mismo numero.");a=this.trackings[n].tracking}""!=this.id_cliente?this.$validator.validate().then((function(t){if(t){console.log(e.trackings);var a=new FormData;a.append("id_cliente",e.id_cliente),a.append("id_empresa_transporte",e.id_empresa_transporte),a.append("warehouse",e.warehouse);for(var n=e.trackings,r=0;r<n.length;r++){var s={},i=[];for(var o in n[r])"image"!=o?(a.append("tracking[".concat(o,"]"),n[r][o]),i.push(o)):a.append("images[".concat(n[r].tracking,"]"),n[r].image);for(var u=0;u<i.length;u++)s[i[u]]=a.get("tracking[".concat(i[u],"]")),a.delete("tracking[".concat(i[u],"]"));a.append("trackings[".concat(r,"]"),JSON.stringify(s))}e.componentRender=c,e.axios.post("almacenes-crear",a,{headers:{"content-type":"multipart/form-data"}}).then((function(t){console.log(t.data),e.alert={msg:t.data.message,clss:"updated"},e.activeComponent=l,setTimeout((function(){e.$router.go(-1)}),4e3),setTimeout((function(){e.componentRender=""}),2e3)})).catch((function(t){console.log(t.response.data),e.alert={msg:t.response.data.message,clss:"error"},e.activeComponent=l,setTimeout((function(){e.componentRender=""}),2e3)}))}})):alert("Por favor, debe agregar un cliente")}}},d=u;var p=a(3379),v=a.n(p),m=a(2639),f={insert:"head",singleton:!1};v()(m.Z,f);m.Z.locals;const h=(0,a(1900).Z)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-xl"},[a("div",{staticClass:"row row-cards"},[a("div",{staticClass:"col-12",staticStyle:{"min-height":"60vh"}},[a(e.componentRender,{tag:"component"}),e._v(" "),""==e.componentRender?a("form",{staticClass:"card card-lg",attrs:{name:"prealerta",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.save()}}},[a("div",{staticClass:"card-body"},[""!=e.activeComponent?a("div",{staticClass:"w-100 mb-3"},[a(e.activeComponent,{tag:"component",attrs:{alert:e.alert}})],1):e._e(),e._v(" "),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"h3"},[e._v("Cliente")]),e._v(" "),a("div",{staticClass:"form-floating mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.cliente,expression:"cliente"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control dropdown-toggle",class:{"is-invalid":e.errors.first("cliente")},attrs:{type:"text","data-bs-toggle":"dropdown",value:"",id:"cliente",name:"cliente","aria-expanded":"false","data-vv-validate-on":"change"},domProps:{value:e.cliente},on:{keyup:function(t){return e.inputSearch(t)},input:function(t){t.target.composing||(e.cliente=t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"cliente"}},[e._v("Buscar Cliente")]),e._v(" "),a("ul",{staticClass:"dropdown-menu input-result-search",style:e.usuarios.length>10?"height: 220px;overflow-y: auto;":"",attrs:{id:"cliente"}},[0==e.usuarios.length?a("li",[e._v("No se encontraron resultados")]):e._e(),e._v(" "),e._l(e.usuarios,(function(t,n){return a("li",{key:n},[a("label",{staticClass:"form-check",attrs:{for:n}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",id:n},domProps:{value:t.usuario_id},on:{click:function(t){return e.clickRadioCheck(t)}}}),e._v(" "),a("span",{staticClass:"form-check-label"},[e._v(e._s(t.cod_usuario)+" -  "+e._s(t.nombres)+" "+e._s(t.apellidos))])])])}))],2),e._v(" "),e.errors.has("cliente")?a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("cliente")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("p",{staticClass:"h3"},[e._v("Empresa de Transporte")]),e._v(" "),a("div",{staticClass:"form-floating mb-3",class:{"is-invalid":e.errors.first("transporte")}},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.id_empresa_transporte,expression:"id_empresa_transporte"}],staticClass:"form-select",attrs:{name:"transporte",id:"transporte","data-vv-validate-on":"change"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.id_empresa_transporte=t.target.multiple?a:a[0]}}},e._l(e.transportes,(function(t,n){return a("option",{key:n,domProps:{value:t.id_empresa_transporte}},[e._v("\n                                               "+e._s(t.codigo)+" - "+e._s(t.nombre)+"\n                                            ")])})),0),e._v(" "),a("label",{attrs:{for:"transporte"}},[e._v("Selecciona un transporte")]),e._v(" "),e.errors.has("transporte")?a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("transporte")))]):e._e()])])])]),e._v(" "),a("div",{staticClass:"col-4"},[a("p",{staticClass:"h3"},[e._v("WareHouse")]),e._v(" "),a("div",{staticClass:"form-floating mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.warehouse,expression:"warehouse"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.first("warehouse")},attrs:{type:"text",id:"warehouse",name:"warehouse","aria-expanded":"false","data-vv-validate-on":"change"},domProps:{value:e.warehouse},on:{input:function(t){t.target.composing||(e.warehouse=t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"warehouse"}},[e._v("WareHouse")]),e._v(" "),e.errors.has("warehouse")?a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("warehouse")))]):e._e()])])]),e._v(" "),a("table",{staticClass:"table table-transparent table-responsive mt-4 mb-3"},[e._m(0),e._v(" "),a("tbody",e._l(e.trackings,(function(t,n){return a("tr",{key:n},[a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking,expression:"item.tracking"}],staticClass:"form-control",attrs:{type:"text",required:"",name:"tracking",placeholder:"tracking"},domProps:{value:t.tracking},on:{input:function(a){a.target.composing||e.$set(t,"tracking",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.descripcion,expression:"item.descripcion"}],staticClass:"form-control",attrs:{required:"",name:"example-textarea-input",rows:"1",placeholder:"Descripcion"},domProps:{value:t.descripcion},on:{input:function(a){a.target.composing||e.$set(t,"descripcion",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num_piezas,expression:"item.num_piezas"}],staticClass:"form-control",attrs:{type:"text",pattern:"[0-9]+",required:"",name:"piezas",placeholder:"numero de piezas"},domProps:{value:t.num_piezas},on:{input:function(a){a.target.composing||e.$set(t,"num_piezas",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ancho,expression:"item.ancho"}],staticClass:"form-control",attrs:{type:"text",pattern:"[0-9,.]+",required:"",name:"ancho",placeholder:"ancho"},domProps:{value:t.ancho},on:{input:function(a){a.target.composing||e.$set(t,"ancho",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.largo,expression:"item.largo"}],staticClass:"form-control",attrs:{type:"text",pattern:"[0-9,.]+",required:"",name:"largo",placeholder:"largo"},domProps:{value:t.largo},on:{input:function(a){a.target.composing||e.$set(t,"largo",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.alto,expression:"item.alto"}],staticClass:"form-control",attrs:{type:"text",pattern:"[0-9,.]+",required:"",name:"alto",placeholder:"alto"},domProps:{value:t.alto},on:{input:function(a){a.target.composing||e.$set(t,"alto",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.peso,expression:"item.peso"}],staticClass:"form-control",attrs:{type:"text",pattern:"[0-9,.]+",required:"",name:"peso",placeholder:"peso"},domProps:{value:t.peso},on:{input:function(a){a.target.composing||e.$set(t,"peso",a.target.value)}}})])]),e._v(" "),a("td",[a("span",{staticClass:"avatar avatar-sm",style:"background-image: url("+t.ruta_image+")"},[a("input",{staticClass:"form-control input-file_s",attrs:{type:"file",id:n},on:{change:function(t){return e.changeFileImage(t)}}})])]),e._v(" "),a("td",[n>0?a("div",{staticClass:"btn-list flex-nowrap"},[a("button",{directives:[{name:"title",rawName:"v-title"}],staticClass:"btn-acticon_spalert",attrs:{type:"button",id:"paquete",value:n,title:"Quitar"},on:{click:function(t){return e.deleteTracking(t)}}},[a("i",{staticClass:"ti ti-trash",staticStyle:{"font-size":"21px"}})])]):e._e()])])})),0)]),e._v(" "),a("div",{staticClass:"d-flex align-items-center mt-5"},[a("btn-volver",{attrs:{classe:"btn-light"}}),e._v(" "),a("button",{staticClass:"btn btn-info ms-auto",attrs:{type:"submit"}},[e._v("\n                            Guardar\n                        ")])],1)])]):e._e()],1)])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[e._v("Nro. Tracking")]),e._v(" "),a("th",{staticStyle:{width:"20%"}},[e._v("Descripción")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("nro. Piezas")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("Ancho")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("Largo")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("Alto")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("Peso")]),e._v(" "),a("th",{staticStyle:{width:"10%"}},[e._v("Img")]),e._v(" "),a("th",{})])])}],!1,null,null,null).exports}}]);