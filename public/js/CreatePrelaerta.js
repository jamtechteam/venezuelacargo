"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3802],{4609:(t,e,a)=>{a.d(e,{Z:()=>s});const r={name:"BtnVolver",props:["classe"],methods:{volver:function(){this.$router.go(-1)}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn",class:t.classe,attrs:{type:"button"},on:{click:t.volver}},[a("i",{staticClass:"ti ti-arrow-back-up me-1"}),t._v("\n    Volver\n")])}),[],!1,null,null,null).exports},6463:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});var r=a(7757),s=a.n(r),n=a(4609);function i(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function o(t){i(n,r,s,o,c,"next",t)}function c(t){i(n,r,s,o,c,"throw",t)}o(void 0)}))}}var c=function(){return a.e(8845).then(a.bind(a,555))};const l={name:"CreatePrelaerta",data:function(){return{loader:!1,activeComponent:"",alert:{msg:"",clss:""},transportes:[],trackings:[],id_empresa_transporte:"",nro_tracking:"",desp_tracking:"",fecha_llegada:""}},beforeCreate:function(){this.$nextTick(o(s().mark((function t(){var e=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("sdsd"),t.next=3,this.axios.get("transport-companies").then((function(t){e.transportes=t.data.results})).catch((function(t){console.log(t)}));case 3:case"end":return t.stop()}}),t,this)}))))},components:{loader:function(){return a.e(4932).then(a.bind(a,4932))},BtnVolver:n.Z},methods:{addTracking:function(){var t=this;this.$validator.validate().then((function(e){if(e){if(!t.checkId_empresa(t.id_empresa_transporte)&&t.trackings.length>0)return void t.respAlert(403,"No puede agregar mas de una empresa de transporte");if(t.checkTracking(t.nro_tracking)&&t.trackings.length>0)return void t.respAlert(403,"El número de tracking, debe ser único.");var a=t.transportes.filter((function(e){return e.id_empresa_transporte==t.id_empresa_transporte}))[0].nombre;t.trackings.push({id_empresa_transporte:t.id_empresa_transporte,transporte:a,tracking:t.nro_tracking,descripcion:t.desp_tracking,fecha_llegada:t.fecha_llegada})}}))},deleteTracking:function(t){for(var e=[],a=0;a<this.trackings.length;a++)this.trackings[a].tracking!=t.target.parentElement.value&&e.push(this.trackings[a]);this.trackings=e},respAlert:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.alert={msg:e,clss:200==t?"updated":"error"},this.activeComponent=c},checkId_empresa:function(t){for(var e=0;e<this.trackings.length;e++)if(this.trackings[e].id_empresa_transporte==t)return!0;return!1},checkTracking:function(t){for(var e=0;e<this.trackings.length;e++)if(this.trackings[e].tracking==t)return!0;return!1},sendSolicitud:function(){var t=this;return o(s().mark((function e(){var a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.trackings.length){e.next=3;break}return t.respAlert(403,"Debe agregar al menos un tracking con su descripción"),e.abrupt("return");case 3:return a={trackings:t.trackings},t.loader=!0,r=function(e){setTimeout((function(){t.loader=!1,t.respAlert(e.status,e.message)}),2e3),200==e.status&&setTimeout((function(){t.$router.go(-1)}),4e3)},e.next=8,t.axios.post("solicitudes",a).then((function(t){console.log(t.data),r(t.data)})).catch((function(t){console.log(t.response.data);var e=t.response.status,a=t.response.data.message;500==e&&(a="Error inesperado. por favor intentar más tarde."),r({status:e,message:a})}));case 8:case"end":return e.stop()}}),e)})))()}}};const d=(0,a(1900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body"},[a("div",{staticClass:"container-xl"},[a("div",{staticClass:"row row-cards"},[a("div",{staticClass:"col-12",staticStyle:{"min-height":"60vh"}},[a("div",{staticClass:"card card-lg"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loader,expression:"loader"}],staticClass:"div-loader_white"},[a("loader")],1),t._v(" "),a("div",{staticClass:"card-body"},[""!=t.activeComponent?a("div",{staticClass:"w-100 mb-3"},[a(t.activeComponent,{tag:"component",attrs:{alert:t.alert}})],1):t._e(),t._v(" "),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-md-4 col-lg-4 col-12 mb-3"},[a("div",{staticClass:"col-12 mb-3"},[a("div",{staticClass:"form-floating mb-3",class:{"is-invalid":t.errors.first("transporte")}},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.id_empresa_transporte,expression:"id_empresa_transporte"}],staticClass:"form-select",attrs:{name:"transporte",id:"transporte","data-vv-validate-on":"change"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.id_empresa_transporte=e.target.multiple?a:a[0]}}},t._l(t.transportes,(function(e,r){return a("option",{key:r,domProps:{value:e.id_empresa_transporte}},[t._v("\r\n                                                "+t._s(e.codigo)+" - "+t._s(e.nombre)+"\r\n                                            ")])})),0),t._v(" "),a("label",{attrs:{for:"transporte"}},[t._v("Selecciona un transporte")]),t._v(" "),t.errors.has("transporte")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("transporte")))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("div",{staticClass:"form-floating mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nro_tracking,expression:"nro_tracking"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("nro_tracking")},attrs:{type:"text",id:"nro_tracking",name:"nro_tracking","aria-expanded":"false","data-vv-validate-on":"change"},domProps:{value:t.nro_tracking},on:{input:function(e){e.target.composing||(t.nro_tracking=e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"nro_tracking"}},[t._v("Número de Tracking")]),t._v(" "),t.errors.has("nro_tracking")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("nro_tracking")))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("div",{staticClass:"form-floating mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.desp_tracking,expression:"desp_tracking"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("desp_tracking")},attrs:{type:"text",id:"desp_tracking",name:"desp_tracking","aria-expanded":"false","data-vv-validate-on":"change"},domProps:{value:t.desp_tracking},on:{input:function(e){e.target.composing||(t.desp_tracking=e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"desp_tracking"}},[t._v("Descripción del Tracking")]),t._v(" "),t.errors.has("desp_tracking")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("desp_tracking")))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-dark w-100",attrs:{type:"button"},on:{click:t.addTracking}},[t._v("Agregar Tracking")])]),t._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("div",{staticClass:"form-floating mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fecha_llegada,expression:"fecha_llegada"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("fecha_llegada")},attrs:{type:"date",id:"fecha_llegada",name:"fecha_llegada","aria-expanded":"false","data-vv-validate-on":"change"},domProps:{value:t.fecha_llegada},on:{input:function(e){e.target.composing||(t.fecha_llegada=e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"fecha_llegada"}},[t._v("Fecha estimada de llegada")]),t._v(" "),t.errors.has("fecha_llegada")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("fecha_llegada")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"col-md-8 col-lg-8 col-12 mb-3 ps-4"},[a("table",{staticClass:"table table-transparent table-responsive"},[t._m(0),t._v(" "),a("tbody",t._l(t.trackings,(function(e,r){return a("tr",{key:r},[a("td",[a("span",[t._v(t._s(e.transporte))])]),t._v(" "),a("td",[a("span",{},[t._v(" "+t._s(e.tracking))])]),t._v(" "),a("td",[a("span",{},[t._v(" "+t._s(e.descripcion))])]),t._v(" "),a("td",[a("span",[t._v(t._s(e.fecha_llegada))])]),t._v(" "),a("td",[a("div",{staticClass:"btn-list flex-nowrap"},[a("button",{directives:[{name:"title",rawName:"v-title"}],staticClass:"btn-acticon_spalert",attrs:{type:"button",value:e.tracking,title:"Quitar"},on:{click:function(e){return t.deleteTracking(e)}}},[a("i",{staticClass:"ti ti-trash",staticStyle:{"font-size":"21px"}})])])])])})),0)])])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center mt-5"},[a("btn-volver",{attrs:{classe:"btn-light"}}),t._v(" "),a("button",{staticClass:"btn btn-info ms-auto",attrs:{type:"submit"},on:{click:t.sendSolicitud}},[t._v("\r\n                                Enviar Solicitud\r\n                            ")])],1)])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v("Nro. Tracking")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("Transporte")]),t._v(" "),a("th",{staticStyle:{width:"40%"}},[t._v("Descripción")]),t._v(" "),a("th",{staticStyle:{width:"15%"}},[t._v("F. Llegada")]),t._v(" "),a("th",{staticStyle:{width:"5%"}})])])}],!1,null,null,null).exports}}]);