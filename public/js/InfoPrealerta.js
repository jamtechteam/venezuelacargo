"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5861],{7675:(e,t,a)=>{a.d(t,{T:()=>s});var n=[{field:"tarifa_maritimo",money:"usd"},{field:"tarifa_aereo",money:"usd"},{field:"monto_tc",money:"ves"},{field:"monto_gasto_extra",money:"usd"},{field:"monto_cond",money:"usd"},{field:"seguro",money:"usd"}],s={init:function(){console.log("as");for(var e=0;e<n.length;e++)document.getElementById(n[e].field)&&function(){console.log("ass");var t="usd"==n[e].money?".":"ves"==n[e].money?",":null;"usd"==n[e].money||n[e].money;document.getElementById(n[e].field).addEventListener("keypress",(function(e){var t=window.Event?e.which:e.keyCod;(t<48||t>57)&&e.preventDefault()})),document.getElementById(n[e].field).addEventListener("click",(function(e){""==e.target.value&&(e.target.value="0"+t+"00")}))}()},destructPrecio:function(e,t){var a=function(e){return n.filter((function(t){return t.field===e}))},s=e;if(console.log(a(t)),0!=a(t).length){var o="usd"==a(t)[0].money?",":"ves"==a(t)[0].money?".":null;if(e.includes(o)){for(var i=e.split(o),r="",l=0;l<i.length;l++)r=r+""+i[l];s=r}}return s},constPrice:function(e,t,a){return o(e,t,a)},desctPrice:function(e,t){var a=e;if(console.log("precio",e),e.includes(t)){for(var n=e.split(t),s="",o=0;o<n.length;o++)s=s+""+n[o];a=s}return a},checkField:function(e){for(var t=0;t<n.length;t++)if(n[t].field==e)return!0;return!1},moneda:function(e){for(var t=0;t<n.length;t++)if(n[t].field==e)return n[t].money}},o=function(e,t,a){for(var n=[],s=[],o=e.split(""),i=0;i<o.length;i++)isNaN(parseInt(o[i]))||n.push(o[i]);if(1==n.length||2==n.length)for(var r=2==n.length?1:2,l=0;l<r;l++)n.unshift(0);n=n.reverse();for(var c=4,d=0;d<n.length;d++){var u=!0,v="";1==d?(v=a,s.push(n[d])):c==d&&d!=n.length-1&&n.length>5?(v=t,c+=3,s.push(n[d])):4==n.length&&n.length-1==d&&0==n[d]&&0==n[n.length-2]||4==n.length&&n.length-1==d&&0==n[d]&&0!=n[n.length-2]?(u=!1,console.log("*")):v=n[d],u&&s.push(v)}return s.reverse().join("")}},1124:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(3645),s=a.n(n)()((function(e){return e[1]}));s.push([e.id,".client-inf-prealerta .dropdown-item.disabled{padding-bottom:0;padding-top:0}.modal.show{display:block}",""]);const o=s},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(s[i]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);n&&s[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},3379:(e,t,a)=>{var n,s=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function r(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],s=0;s<e.length;s++){var o=e[s],l=t.base?o[0]+t.base:o[0],c=a[l]||0,d="".concat(l," ").concat(c);a[l]=c+1;var u=r(d),v={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(v)):i.push({identifier:d,updater:f(v,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=a.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function v(e,t,a,n){var s=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,s);else{var o=document.createTextNode(s),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function m(e,t,a){var n=a.css,s=a.media,o=a.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,_=0;function f(e,t){var a,n,s;if(t.singleton){var o=_++;a=p||(p=c(t)),n=v.bind(null,a,o,!1),s=v.bind(null,a,o,!0)}else a=c(t),n=m.bind(null,a,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var s=r(a[n]);i[s].references--}for(var o=l(e,t),c=0;c<a.length;c++){var d=r(a[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}a=o}}}},4609:(e,t,a)=>{a.d(t,{Z:()=>s});const n={name:"BtnVolver",props:["classe"],methods:{volver:function(){this.$router.go(-1)}}};const s=(0,a(1900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn",class:e.classe,attrs:{type:"button"},on:{click:e.volver}},[a("i",{staticClass:"ti ti-arrow-back-up me-1"}),e._v("\n    Volver\n")])}),[],!1,null,null,null).exports},6004:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(7757),s=a.n(n),o=a(4609),i=a(7675);function r(e,t,a,n,s,o,i){try{var r=e[o](i),l=r.value}catch(e){return void a(e)}r.done?t(l):Promise.resolve(l).then(n,s)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var o=e.apply(t,a);function i(e){r(o,n,s,i,l,"next",e)}function l(e){r(o,n,s,i,l,"throw",e)}i(void 0)}))}}var c=function(){return a.e(6956).then(a.bind(a,4932))},d=function(){return a.e(8845).then(a.bind(a,555))},u=function(){return a.e(1093).then(a.bind(a,5852))},v=[{title:"Pendiente por recibir",valor:"pendiente",check:!1},{title:"Recibido en Miami",valor:"recibido",check:!1}];const m={name:"InfoPrealerta",data:function(){return{loader:!1,componentRender:c,activeComponent:"",alert:{msg:"",clss:""},trackings:[],prealerta:{nombre_transporte:"",fecha_solicitud:"",fecha_llegada_solicitud:"",nro_warehouse:""},estado:!1,almacen_status:!1,estados:[],solicitud:{tipo_envio:"",id_almacen:"",id_solicitud:"",id_tracking:"",reempaque:"",total_seguro:0},show:!1,tracking:{}}},components:{loader:c,BtnVolver:o.Z},beforeCreate:function(){this.$nextTick(l(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sdsd"),0==Object.keys(this.$route.params).length||0==this.$route.query.length||!this.$route.query.hasOwnProperty("estado")){e.next=6;break}return e.next=4,this.axios.get("solicitudes/".concat(this.$route.params.id),{params:{estado:this.$route.query.estado}}).then((function(e){if(null!=e.data.results){var a=e.data.results,n=a.transporte_nombre,s=a.solicitud_fecha_creado,o=a.solicitud_fecha_llegada,r=a.almacen_warehouse,l=a.solicitud_estado,c=a.tracking,d=a.id_solicitud;t.prealerta={nombre_transporte:n,fecha_solicitud:s,fecha_llegada_solicitud:o,nro_warehouse:r};for(var m=0;m<v.length;m++)v[m].valor==l&&(v[m].check=!0);"recibido"!=l&&"enviado"!=l||(v[0].check=!0),"enviado"==l&&(v[1].check=!0),0==e.data.results.almacen_status&&(t.estado=!0,t.solicitud.id_almacen=e.data.results.id_almacen),1==e.data.results.almacen_status&&(t.almacen_status=!0),t.estados=v,t.trackings=c;for(var p=0;p<t.trackings.length;p++){var _=t.trackings[p].total_seguro;_=(_=(f=_)%1==0?parseInt(f):parseFloat(f)).toFixed(2),_=i.T.constPrice(_,",","."),t.trackings[p].total_seguro=_,t.solicitud.id_tracking=t.trackings[p].id_tracking}t.solicitud.id_solicitud=d,console.log(t.trackings),t.componentRender=""}else t.componentRender=u;var f;console.log(e.data)})).catch((function(e){console.log(e)}));case 4:e.next=7;break;case 6:this.componentRender=u;case 7:case"end":return e.stop()}}),e,this)}))))},methods:{changeTotalSeguro:function(e){this.solicitud.total_seguro=i.T.constPrice(e.target.value,",",".")},sendInstruccion:function(){var e=this;return l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.estado&&e.$validator.validate().then(function(){var t=l(s().mark((function t(a){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}if(""!=e.solicitud.tipo_envio){t.next=4;break}return e.respAlert(403,"Por Favor debe indicar un tipo de envio"),t.abrupt("return");case 4:if(""!=e.solicitud.reempaque){t.next=7;break}return e.respAlert(403,"Por Favor debe indicar si quiere o no con reempaque"),t.abrupt("return");case 7:return n={tipo_envio:e.solicitud.tipo_envio,id_almacen:e.solicitud.id_almacen,id_tracking:e.solicitud.id_tracking,reempaque:e.solicitud.reempaque,total_seguro:i.T.desctPrice("".concat(e.solicitud.total_seguro),",")},console.log(n),e.loader=!0,o=function(t){setTimeout((function(){e.loader=!1,e.respAlert(t.status,t.message)}),2e3),200==t.status&&setTimeout((function(){e.$router.go(-1)}),4e3)},t.next=13,e.axios.post("solicitudes-instruccion/".concat(e.solicitud.id_solicitud),n).then((function(e){console.log(e.data),o(e.data)})).catch((function(e){console.log(e.response.data);var t=e.response.status,a=e.response.data.message;500==t&&(a="Error inesperado. por favor intentar más tarde."),o({status:t,message:a})}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},respAlert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.alert={msg:t,clss:200==e?"updated":"error"},this.activeComponent=d}}};var p=a(3379),_=a.n(p),f=a(1124),g={insert:"head",singleton:!1};_()(f.Z,g);f.Z.locals;const h=(0,a(1900).Z)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-body"},[a("div",{staticClass:"container-xl"},[a("div",{staticClass:"row row-cards"},[a("div",{staticClass:"col-12",staticStyle:{"min-height":"60vh"}},[a(e.componentRender,{tag:"component"}),e._v(" "),""==e.componentRender?a("div",{staticClass:"card card-lg"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loader,expression:"loader"}],staticClass:"div-loader_white"},[a("loader")],1),e._v(" "),a("div",{staticClass:"card-body"},[""!=e.activeComponent?a("div",{staticClass:"w-100 mb-3"},[a(e.activeComponent,{tag:"component",attrs:{alert:e.alert}})],1):e._e(),e._v(" "),a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-md-7 col-lg-7 col-sm-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-12 col-sm-4 col-lg-12 mb-3"},[a("p",{staticClass:"h3"},[e._v("Solicitud Envío")]),e._v(" "),a("address",[a("p",[e._v("Empresa de Transporte: "+e._s(e.prealerta.nombre_transporte))]),e._v(" "),a("p",[e._v("Cantidad Trackings: "+e._s(e.trackings.length))]),e._v(" "),a("p",[e._v("Fecha De Solicitud: "+e._s(e.prealerta.fecha_solicitud))]),e._v(" "),a("p",[e._v("Fecha De Llegada: "+e._s(e.prealerta.fecha_llegada_solicitud))]),e._v(" "),a("p",[e._v("Número de Warehouse: "+e._s(" "+(null!=e.prealerta.nro_warehouse?e.prealerta.nro_warehouse:"N/A")+" "))])])]),e._v(" "),a("div",{staticClass:"col-12 col-md-12 col-sm-8 col-lg-12"},[a("p",{staticClass:"h3"},[e._v("Estado de Solicitud")]),e._v(" "),a("div",{staticClass:"row"},e._l(e.estados,(function(t,n){return a("div",{key:n,staticClass:"col-md-12 col-sm-12 col-12 mb-3"},[a("div",{staticClass:"avatar text-uppercase w-100",class:{"bg-green-lt":t.check,"bg-muted-lt":!t.check}},[e._v("\n                                                   "+e._s(t.title)+"\n                                               ")])])})),0)])])]),e._v(" "),a("div",{staticClass:"col-md-5 col-lg-5 col-sm-12 mb-3"},[a("p",{staticClass:"h3"},[e._v("Tracking: ")]),e._v(" "),a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"card-body",staticStyle:{padding:"1rem 1rem !important"}},[a("div",{staticClass:"divide-y"},e._l(e.trackings,(function(t,n){return a("div",{key:n},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto"},[null!=t.ruta_image?a("a",{staticClass:"avatar",style:"background-image: url("+t.ruta_image+")",attrs:{href:t.ruta_image,target:"_blank",rel:"noopener noreferrer"}}):a("span",{staticClass:"avatar",style:"background-image: url("+t.ruta_image+")"})]),e._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"text-truncate"},[e._v("\n                                                           "+e._s(t.descripcion)+"\n                                                       ")]),e._v(" "),a("div",{staticClass:"text-muted"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Tracking:")]),e._v(" "),a("span",{staticClass:"small text-mute"},[e._v(e._s(t.tracking))])])]),e._v(" "),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"dropdown"},[e._m(0,!0),e._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-demo dropdown-menu-end client-inf-prealerta"},[a("h6",{staticClass:"dropdown-header"},[e._v("Más Información")]),e._v(" "),a("div",{staticClass:"dropdown-divider"}),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Ancho:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.ancho?t.ancho:"N/A")+" "))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Alto:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.alto?t.alto:"N/A")+" "))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Largo:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.largo?t.largo:"N/A")+" "))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Peso:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.peso?t.peso:"N/A")))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("FT³:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(t.pie_cubico))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("VOL:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.volumen?t.volumen:"N/A")))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Número de Piezas:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(null!=t.num_piezas?t.num_piezas:"N/A")))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Total Seguro:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(e.almacen_status?t.total_seguro:"N/A")))])])]),e._v(" "),a("div",{staticClass:"dropdown-item disabled"},[a("span",{staticClass:"small text-muted me-1"},[e._v("Con Reempaque:")]),e._v(" "),a("div",[a("strong",[e._v(e._s(" "+(e.almacen_status?t.reempaque:"N/A")))])])])])])])])])})),0)])]),e._v(" "),e.estado?a("div",{staticClass:"m-0 w-100"},[a("div",{staticClass:"form-floating mb-3",class:{"is-invalid":e.errors.first("tipo_envio")}},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.solicitud.tipo_envio,expression:"solicitud.tipo_envio"}],staticClass:"form-select",attrs:{name:"tipo_envio",id:"tipo_envio","data-vv-validate-on":"change"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.solicitud,"tipo_envio",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"aereo"}},[e._v("\n                                               Aereo\n                                           ")]),e._v(" "),a("option",{attrs:{value:"maritimo"}},[e._v("\n                                               Maritimo\n                                           ")])]),e._v(" "),a("label",{attrs:{for:"tipo_envio"}},[e._v("Selecciona el tipo de envio")]),e._v(" "),e.errors.has("tipo_envio")?a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("tipo_envio")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-floating mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.solicitud.reempaque,expression:"solicitud.reempaque"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-select",class:{"is-invalid":e.errors.first("tipo_envio")},attrs:{name:"reempaque",id:"reempaque","data-vv-validate-on":"change"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.solicitud,"reempaque",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"si"}},[e._v("\n                                               SI\n                                           ")]),e._v(" "),a("option",{attrs:{value:"no"}},[e._v("\n                                               NO\n                                           ")])]),e._v(" "),a("label",{attrs:{for:"reempaque"}},[e._v("Con Reempaque")]),e._v(" "),e.errors.has("reempaque")?a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.first("reempaque")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-floating mb-3 w-100"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.solicitud.total_seguro,expression:"solicitud.total_seguro"}],staticClass:"form-control",attrs:{type:"text",name:"total_seguro",id:"total_seguro",pattern:"[0-9,.]+"},domProps:{value:e.solicitud.total_seguro},on:{keyup:function(t){return e.changeTotalSeguro(t)},input:function(t){t.target.composing||e.$set(e.solicitud,"total_seguro",t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"total_seguro"}},[e._v("Total Seguro")])]),e._v(" "),e._m(1)]):e._e()])]),e._v(" "),a("div",{staticClass:"d-flex align-items-center mt-5"},[a("btn-volver",{attrs:{classe:"btn-light"}}),e._v(" "),e.estado?a("button",{staticClass:"btn btn-info ms-auto",staticStyle:{"background-color":"#2C2E88"},attrs:{type:"submit"},on:{click:e.sendInstruccion}},[e._v("\n                               Enviar Instrucción\n                           ")]):e._e()],1)])]):e._e()],1)])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"text-muted card-dropdown",attrs:{type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"outside",role:"button","aria-expanded":"false"}},[a("span",{staticStyle:{color:"#24298D"}},[e._v("Más Inf.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"form-check-description"},[e._v("\n                                       El seguro "),a("strong",[e._v("solo cubre HURTOS")]),e._v(", no cubre DECOMISOS O PROCESOS ADUANALES\n                                   ")])}],!1,null,null,null).exports}}]);