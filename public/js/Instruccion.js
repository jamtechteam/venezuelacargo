"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8152],{7675:(t,e,a)=>{a.d(e,{T:()=>s});var r=[{field:"tarifa_maritimo",money:"usd"},{field:"tarifa_aereo",money:"usd"},{field:"monto_tc",money:"ves"},{field:"monto_gasto_extra",money:"usd"},{field:"monto_cond",money:"usd"},{field:"seguro",money:"usd"}],s={init:function(){console.log("as");for(var t=0;t<r.length;t++)document.getElementById(r[t].field)&&function(){console.log("ass");var e="usd"==r[t].money?".":"ves"==r[t].money?",":null;"usd"==r[t].money||r[t].money;document.getElementById(r[t].field).addEventListener("keypress",(function(t){var e=window.Event?t.which:t.keyCod;(e<48||e>57)&&t.preventDefault()})),document.getElementById(r[t].field).addEventListener("click",(function(t){""==t.target.value&&(t.target.value="0"+e+"00")}))}()},destructPrecio:function(t,e){var a=function(t){return r.filter((function(e){return e.field===t}))},s=t;if(console.log(a(e)),0!=a(e).length){var o="usd"==a(e)[0].money?",":"ves"==a(e)[0].money?".":null;if(t.includes(o)){for(var n=t.split(o),i="",l=0;l<n.length;l++)i=i+""+n[l];s=i}}return s},constPrice:function(t,e,a){return o(t,e,a)},desctPrice:function(t,e){var a=t;if(console.log("precio",t),t.includes(e)){for(var r=t.split(e),s="",o=0;o<r.length;o++)s=s+""+r[o];a=s}return a},checkField:function(t){for(var e=0;e<r.length;e++)if(r[e].field==t)return!0;return!1},moneda:function(t){for(var e=0;e<r.length;e++)if(r[e].field==t)return r[e].money}},o=function(t,e,a){for(var r=[],s=[],o=t.split(""),n=0;n<o.length;n++)isNaN(parseInt(o[n]))||r.push(o[n]);if(1==r.length||2==r.length)for(var i=2==r.length?1:2,l=0;l<i;l++)r.unshift(0);r=r.reverse();for(var u=4,c=0;c<r.length;c++){var d=!0,v="";1==c?(v=a,s.push(r[c])):u==c&&c!=r.length-1&&r.length>5?(v=e,u+=3,s.push(r[c])):4==r.length&&r.length-1==c&&0==r[c]&&0==r[r.length-2]||4==r.length&&r.length-1==c&&0==r[c]&&0!=r[r.length-2]?(d=!1,console.log("*")):v=r[c],d&&s.push(v)}return s.reverse().join("")}},4609:(t,e,a)=>{a.d(e,{Z:()=>s});const r={name:"BtnVolver",props:["classe"],methods:{volver:function(){this.$router.go(-1)}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn",class:t.classe,attrs:{type:"button"},on:{click:t.volver}},[a("i",{staticClass:"ti ti-arrow-back-up me-1"}),t._v("\n    Volver\n")])}),[],!1,null,null,null).exports},9718:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var r=a(7757),s=a.n(r),o=a(4609),n=a(7675);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function v(t,e,a,r,s,o,n){try{var i=t[o](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,s)}function _(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var o=t.apply(e,a);function n(t){v(o,r,s,n,i,"next",t)}function i(t){v(o,r,s,n,i,"throw",t)}n(void 0)}))}}var p=function(){return a.e(4932).then(a.bind(a,4932))},m=function(){return a.e(1093).then(a.bind(a,5852))},f=function(){return a.e(8845).then(a.bind(a,555))};const g={name:"Instruccion",data:function(){return{componentRender:p,activeComponent:"",user:{},prealerta:{},trackings:[],solicitud:{warehouse:"",id_almacen:"",tipo_envio:"",total_seguro:"0.00",id_solicitud:"",estado:"",cod_usuario:"",usuario_id:"",trackings:[]},alert:{}}},components:{BtnVolver:o.Z},beforeCreate:function(){this.$nextTick(_(s().mark((function t(){var e=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0==Object.keys(this.$route.params).length||0==Object.keys(this.$route.query).length||!this.$route.query.hasOwnProperty("estado")){t.next=5;break}return t.next=3,this.axios.get("prealertas/".concat(this.$route.params.id),{params:{estado:this.$route.query.estado}}).then((function(t){e.user={usuario_id:t.data.results.usuario_id,cod_usuario:t.data.results.cod_usuario,email:t.data.results.email,nombres:t.data.results.nombres,apellidos:t.data.results.apellidos,cedula:t.data.results.cedula,telefono:t.data.results.telefono,estado:t.data.results.estado_ve,zona:t.data.results.zona,ref_direccion:t.data.results.ref_direccion,codigo_postal:t.data.results.codigo_postal},e.prealerta={id_solicitud:t.data.results.id_solicitud,id_empresa_transporte:t.data.results.id_empresa_transporte,nombre:t.data.results.nombre,estado:t.data.results.estado,fecha_creado:t.data.results.fecha_creado,fecha_llegada:t.data.results.fecha_llegada},e.trackings=t.data.results.trackings;for(var a=0;a<e.trackings.length;a++){var r=e.trackings[a].total_seguro;r=(r=(s=r)%1==0?parseInt(s):parseFloat(s)).toFixed(2),r=n.T.constPrice(r,",","."),e.trackings[a].total_seguro=r}var s;e.solicitud.estado=e.$route.query.estado,e.solicitud.id_solicitud=t.data.results.id_solicitud,e.solicitud.usuario_id=e.user.usuario_id,e.solicitud.cod_usuario=e.user.cod_usuario,e.solicitud.tipo_envio=t.data.results.tipo_envio,1==e.solicitud.cod_usuario&&(e.solicitud.cod_usuario=""),null!=t.data.results.warehouse&&(e.solicitud.warehouse=t.data.results.warehouse),null!=t.data.results.id_almacen&&(e.solicitud.id_almacen=t.data.results.id_almacen),e.solicitud.total_seguro=t.data.results.total_seguro,1==t.data.results.status&&(e.solicitud.total_seguro=n.T.constPrice(e.solicitud.total_seguro,",",".")),e.componentRender=""})).catch((function(t){e.componentRender=m;for(var a=0;a<e.trackings.length;a++)e.trackings[a].total_seguro=n.T.constPrice(e.trackings[a].total_seguro,",",".")}));case 3:t.next=6;break;case 5:this.componentRender=m;case 6:case"end":return t.stop()}}),t,this)}))))},methods:{changeReempaque:function(t){this.trackings[t.target.value].reempaque="no"==this.trackings[t.target.value].reempaque?"si":"no"},changeTotalSeguro:function(t){var e=n.T.constPrice(t.target.value,",",".");"total_seguro"==t.target.id?this.solicitud.total_seguro=e:this.trackings[t.target.id].total_seguro=e},saveInstruccion:function(){var t=this;this.$validator.validate().then((function(e){if(e){t.componentRender=p;var a=c(t.trackings),r=l({},t.solicitud);r.total_seguro=n.T.desctPrice(r.total_seguro,",");for(var s=[],o=0;o<a.length;o++){var i=l({},a[o]);i.total_seguro=n.T.desctPrice(i.total_seguro,","),s.push(i)}r.trackings=s,t.axios.post("almacen/instrucciones",{solicitud:r},{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e.data),t.alert={msg:e.data.message,clss:"updated"},t.activeComponent=f,setTimeout((function(){t.$router.go(-1)}),4e3),setTimeout((function(){t.componentRender=""}),2e3)})).catch((function(e){console.log(e.response.data),t.alert={msg:e.response.data.message,clss:"error"},t.activeComponent=f,setTimeout((function(){t.componentRender=""}),2e3)}))}}))}}};const h=(0,a(1900).Z)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-xl"},[a("div",{staticClass:"row row-cards"},[a("div",{staticClass:"col-12",staticStyle:{"min-height":"60vh"}},[a(t.componentRender,{tag:"component"}),t._v(" "),""==t.componentRender?a("form",{staticClass:"card card-lg",attrs:{name:"prealerta",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.saveInstruccion(e)}}},[a("div",{staticClass:"card-body"},[""!=t.activeComponent?a("div",{staticClass:"w-100 mb-3"},[a(t.activeComponent,{tag:"component",attrs:{alert:t.alert}})],1):t._e(),t._v(" "),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"h3"},[t._v("Solicitud Envío")]),t._v(" "),a("address",[a("p",[t._v("Empresa de Transporte: "+t._s(t.prealerta.nombre))]),t._v(" "),a("p",[t._v("Estado de Solicitud: "+t._s(t.prealerta.estado))]),t._v(" "),a("p",[t._v("Cantidad Trackings: "+t._s(t.trackings.length))]),t._v(" "),a("p",[t._v("Fecha De Solicitud: "+t._s(t.prealerta.fecha_creado))]),t._v(" "),a("p",[t._v("Fecha De Llegada: "+t._s(t.prealerta.fecha_llegada))])])]),t._v(" "),a("div",{staticClass:"col-6 text-end"},[a("p",{staticClass:"h3"},[t._v("Cliente")]),t._v(" "),a("address",[a("p",[t._v("Correo Electrónico: "+t._s(t.user.email))]),t._v(" "),a("p",[t._v("Nombre Completo: "+t._s(t.user.nombres)+" "+t._s(t.user.apellidos))]),t._v(" "),1!=t.user.cod_usuario?a("p",[t._v("Código Usuario: "+t._s(t.user.cod_usuario))]):t._e(),t._v(" "),a("p",[t._v("Teléfono: "+t._s(t.user.telefono))]),t._v(" "),a("p",[t._v("Cédula: "+t._s(t.user.cedula))]),t._v(" "),a("p",[t._v("Dirección: "+t._s(t.user.estado)+". "+t._s(t.user.zona)+", "+t._s(t.user.codigo_postal)+" ")]),t._v(" "),null!=t.user.ref_direccion?a("p",[t._v("Ref. Dirección: "+t._s(t.user.ref_direccion))]):t._e()])])]),t._v(" "),a("table",{staticClass:"table table-transparent table-responsive mt-4 mb-5"},[t._m(0),t._v(" "),a("tbody",t._l(t.trackings,(function(e,r){return a("tr",{key:r},[a("td",[a("span",{},[t._v(" "+t._s(e.tracking))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.descripcion))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.num_piezas))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.ancho))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.largo))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.alto))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.peso))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.volumen))])]),t._v(" "),a("td",[a("span",{},[t._v(t._s(e.pie_cubico))])]),t._v(" "),a("td",[a("span",{},[a("button",{staticClass:"btn",class:{"btn-danger":"no"==e.reempaque,"btn-success":"si"==e.reempaque},attrs:{type:"button",value:r},on:{click:function(e){return t.changeReempaque(e)}}},[t._v(" "+t._s(e.reempaque)+" ")])])]),t._v(" "),a("td",[a("span",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.total_seguro,expression:"item.total_seguro"}],staticClass:"form-control",attrs:{type:"text",id:r,name:"total_seguro",placeholder:e.total_seguro,pattern:"[0-9,.]+"},domProps:{value:e.total_seguro},on:{keyup:function(e){return t.changeTotalSeguro(e)},input:function(a){a.target.composing||t.$set(e,"total_seguro",a.target.value)}}})])]),t._v(" "),a("td",[a("span",{staticClass:"avatar avatar-sm",style:"background-image: url("+e.ruta_image+")"})])])})),0)]),t._v(" "),a("div",{staticClass:"d-flex align-items-center mt-5"},[a("div",{staticClass:" m-0 ms-auto",staticStyle:{width:"330px"}},[a("div",{staticClass:"form-floating mb-3 w-100"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.solicitud.warehouse,expression:"solicitud.warehouse"}],staticClass:"form-control",attrs:{type:"text",disabled:"",name:"warehouse",id:"warehouse"},domProps:{value:t.solicitud.warehouse},on:{input:function(e){e.target.composing||t.$set(t.solicitud,"warehouse",e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"warehouse"}},[t._v("Warehouse")])]),t._v(" "),a("div",{staticClass:"form-floating mb-3",class:{"is-invalid":t.errors.first("tipo_envio")}},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.solicitud.tipo_envio,expression:"solicitud.tipo_envio"}],staticClass:"form-select",attrs:{name:"tipo_envio",id:"tipo_envio","data-vv-validate-on":"change"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.solicitud,"tipo_envio",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"aereo"}},[t._v("\n                                        Aereo\n                                    ")]),t._v(" "),a("option",{attrs:{value:"maritimo"}},[t._v("\n                                        Maritimo\n                                    ")])]),t._v(" "),a("label",{attrs:{for:"tipo_envio"}},[t._v("Selecciona el tipo de envio")]),t._v(" "),t.errors.has("tipo_envio")?a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.first("tipo_envio")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center mt-3"},[a("btn-volver",{attrs:{classe:"btn-light"}}),t._v(" "),a("button",{staticClass:"btn btn-info ms-auto",attrs:{type:"submit"}},[t._v("\n                            Guardar\n                        ")])],1)])]):t._e()],1)])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v("nro. Tracking")]),t._v(" "),a("th",{staticStyle:{width:"20%"}},[t._v("Descripción")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Piezas")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Ancho")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Largo")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Alto")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Peso")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Vol")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("FT³")]),t._v(" "),a("th",{staticStyle:{width:"8%"}},[t._v("Reempaque")]),t._v(" "),a("th",{attrs:{cstyle:"width: 12%;"}},[t._v("Total Seguro")]),t._v(" "),a("th",{staticStyle:{width:"5%"}},[t._v("Img")])])])}],!1,null,null,null).exports},5233:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});const r=(0,a(1900).Z)({},undefined,undefined,!1,null,null,null).exports}}]);